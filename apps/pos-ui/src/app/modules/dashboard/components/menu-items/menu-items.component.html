<div
  (click)="onHamburgerClick()"
  (keypress)="onHamburgerClick()"
  tabindex="1"
  class="md:hidden p-4 cursor-pointer"
>
  <i class="pi pi-bars"></i>
</div>

@if(isOpen()) {
<div
  (click)="isOpen.set(false)"
  (keydown)="isOpen.set(false)"
  tabindex="-1"
  class="fixed md:hidden bg-black opacity-60 w-full h-full top-0 left-0 z-10"
></div>
}

<div
  [ngClass]="
    isOpen()
      ? 'translate-x-0 md:translate-x-0'
      : '-translate-x-full md:translate-x-0'
  "
  class="flex flex-grow flex-col py-4 min-w-[20rem] md:min-w-0 fixed top-0 left-0 h-screen w-auto md:h-auto md:relative gap-4 bg-primary-500 z-10 transition-transform duration-300"
>
  <div class="flex flex-col px-3">
    <span class="md:hidden lg:block text-xs mb-2">MODU≈ÅY</span>

    <div class="flex flex-col">
      @for(module of modules; track module.route) { @let isActive =
      dashboard.title() === module.title;

      <div
        (click)="onModuleClick(module)"
        (keydown)="onModuleClick(module)"
        tabindex="0"
        class="w-full py-2 px-4 lg:px-4 rounded-lg cursor-pointer transition hover:bg-primary-600 flex items-center md:justify-center lg:justify-start gap-2"
        [ngClass]="{
          'hover:bg-primary-700': isActive,
          'bg-primary-700': isActive
        }"
      >
        <i [class]="'text-lg pi pi-' + module.icon"></i>
        <span class="md:hidden lg:inline text-nowrap">{{ module.title }}</span>
      </div>
      }
    </div>
  </div>

  <div class="flex flex-col px-3">
    <span class="md:hidden lg:block text-xs mb-2">USTAWIENIA</span>

    <div
      class="flex gap-2 py-2 px-4 md:px-0 items-center md:justify-center lg:justify-start"
    >
      <p-toggleswitch [ngModel]="isDark()" (onChange)="onThemeClick()" />
      <span class="text-sm hidden lg:inline">{{
        isDark() ? 'Ciemny' : 'Jasny'
      }}</span>
    </div>
  </div>

  <div class="flex px-3 flex-grow items-end w-full">
          <div
        tabindex="0"
        class="w-full py-2 px-4 lg:px-4 rounded-lg cursor-pointer transition hover:bg-primary-600 flex items-center md:justify-center lg:justify-start gap-2"
      >
        <i class="text-lg pi pi-sign-out"></i>
        <span class="md:hidden lg:inline text-nowrap">Wyloguj sie</span>
      </div>
  </div>
</div>
